{"version":3,"sources":["dist/angular-websocket.js"],"names":["global","factory","define","amd","exports","module","require","mod","angular","ws","angularWebsocket","this","_angular","_interopRequireDefault","obj","__esModule","default","$WebSocketProvider","$rootScope","$q","$timeout","$websocketBackend","$WebSocket","url","protocols","options","isObject","isArray","undefined","ssl","test","scope","rootScopeFailover","useApplyAsync","initialTimeout","maxTimeout","reconnectIfNotNormalClose","consoleLogReconnect","binaryType","_reconnectAttempts","sendQueue","onOpenCallbacks","onMessageCallbacks","onErrorCallbacks","onCloseCallbacks","objectFreeze","_readyStateConstants","_connect","_setInternalState","prototype","CONNECTING","OPEN","CLOSING","CLOSED","RECONNECT_ABORTED","_normalCloseCode","_reconnectableStatusCodes","safeDigest","autoApply","$$phase","$digest","bindToScope","self","$on","force","socket","readyState","create","onmessage","_angular2","bind","_onMessageHandler","onopen","_onOpenHandler","onerror","_onErrorHandler","onclose","_onCloseHandler","fireQueue","length","data","shift","send","isString","message","JSON","stringify","deferred","resolve","notifyOpenCallbacks","event","i","call","notifyCloseCallbacks","notifyErrorCallbacks","onOpen","cb","push","onClose","onError","onMessage","callback","isFunction","Error","isDefined","filter","RegExp","fn","pattern","code","indexOf","reconnect","$applyAsync","applyAsyncOrDigest","args","arraySlice","arguments","apply","currentCallback","exec","close","bufferedAmount","cancelableify","promise","cancel","then","newPromise","reason","splice","reject","defer","isMocked","isConnected","mockSend","backoffDelay","_getBackoffDelay","backoffDelaySeconds","_typeof","reconnectDelaySeconds","console","log","attempt","R","Math","random","T","F","N","M","floor","min","pow","state","objectDefineProperty","_internalConnectionState","forEach","pending","get","set","$WebSocketBackendProvider","$log","match","Socket","createWebSocketBackend","warn","Object","defineProperty","value","Symbol","iterator","constructor","window","Client","client","e","WebSocket","MozWebSocket","noop","freeze","Array","slice","elt","len","from","Number","ceil","service"],"mappings":"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"}