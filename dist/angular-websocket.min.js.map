{"version":3,"sources":["dist/angular-websocket.js"],"names":["global","factory","define","amd","exports","module","require","mod","angular","ws","angularWebsocket","this","_angular","_interopRequireDefault","obj","__esModule","default","$WebSocketProvider","$rootScope","$q","$timeout","$websocketBackend","$WebSocket","url","protocols","options","isObject","isArray","undefined","ssl","test","scope","rootScopeFailover","useApplyAsync","initialTimeout","maxTimeout","reconnectIfNotNormalClose","binaryType","_reconnectAttempts","sendQueue","onOpenCallbacks","onMessageCallbacks","onErrorCallbacks","onCloseCallbacks","objectFreeze","_readyStateConstants","_connect","_setInternalState","prototype","CONNECTING","OPEN","CLOSING","CLOSED","RECONNECT_ABORTED","_normalCloseCode","_reconnectableStatusCodes","safeDigest","autoApply","$$phase","$digest","bindToScope","self","$on","force","socket","onmessage","onopen","onerror","onclose","close","readyState","create","_angular2","bind","_onMessageHandler","_onOpenHandler","_onErrorHandler","_onCloseHandler","fireQueue","length","data","shift","send","isString","message","JSON","stringify","deferred","resolve","notifyOpenCallbacks","event","i","call","notifyCloseCallbacks","notifyErrorCallbacks","onOpen","cb","push","onClose","onError","onMessage","callback","isFunction","Error","isDefined","filter","RegExp","fn","pattern","$applyAsync","code","indexOf","reconnect","applyAsyncOrDigest","args","arraySlice","arguments","apply","currentCallback","exec","bufferedAmount","cancelableify","promise","cancel","then","newPromise","reason","splice","reject","defer","backoffDelay","_getBackoffDelay","backoffDelaySeconds","console","log","attempt","R","Math","random","T","F","N","M","floor","min","pow","state","objectDefineProperty","_internalConnectionState","forEach","pending","get","set","$WebSocketBackendProvider","$log","match","Socket","createWebSocketBackend","warn","Object","defineProperty","value","window","Client","client","e","WebSocket","MozWebSocket","noop","freeze","Array","slice","elt","len","from","Number","ceil","service"],"mappings":"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"}